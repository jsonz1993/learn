<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>模型</title>
	<script src="../underscore-min.js"></script>
	<script src="../backbone-min.js"></script>
</head>
<body>
	

	<script>
		var Person = Backbone.Model.extend({
			initialize: function(){
				console.log('hello world');
			},

			defaults: function(){
				return {
					age: 20
				}
			}
		})
		var p = new Person({name: 'Jsonz',height: '20'})

		// p.get('age'); p.get('name');
		//  Backbone的绑定功能很强大，当Model数据变化的时候，能够自动的触发方法，更新视图View。
		
		var Person1 = Backbone.Model.extend({
			initialize: function(){
				console.log('hello Person2');

				// 当name 属性改变时，添加一个绑定函数
				this.bind('change:name', function(){
					console.log(this.get('name') + ' is now the value for name and prev value is ' + this.previous('name'));
				})

				// 添加一个和 error错误绑定的方法，用于处理错误数据
				this.bind('error', function(model, error){
					console.error(error + ' biu');
				})
			},

			defaults: {
				name: 'Jsonz',
				height: 'unKnow'
			},

			validate: function(attributes){
				if (attributes.name == 'job') {
					// 返回出错信息
					return 'oh, you are sb';
				}
			}
		});

		var person1 = new Person1();
	</script>
</body>
</html>